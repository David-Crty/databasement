"use strict";(globalThis.webpackChunkdatabasement_docs=globalThis.webpackChunkdatabasement_docs||[]).push([[314],{5597:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"self-hosting/guides/docker","title":"Docker","description":"This guide will help you deploy Databasement using Docker. This is the simplest deployment method, using a single container that includes everything you need.","source":"@site/docs/self-hosting/guides/docker.md","sourceDirName":"self-hosting/guides","slug":"/self-hosting/guides/docker","permalink":"/databasement/self-hosting/guides/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/David-Crty/databasement/tree/main/docs/docs/self-hosting/guides/docker.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"selfHostingSidebar","previous":{"title":"Configuration","permalink":"/databasement/self-hosting/configuration"},"next":{"title":"Docker Compose","permalink":"/databasement/self-hosting/guides/docker-compose"}}');var s=a(4848),r=a(8453);const i={sidebar_position:1},o="Docker",d={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start (SQLite)",id:"quick-start-sqlite",level:2},{value:"Production Setup (External Database)",id:"production-setup-external-database",level:2},{value:"1. Generate the Application Key",id:"1-generate-the-application-key",level:3},{value:"2. Prepare Your Database",id:"2-prepare-your-database",level:3},{value:"3. Run the Container",id:"3-run-the-container",level:3},{value:"4. Access the Application",id:"4-access-the-application",level:3},{value:"Using an Environment File",id:"using-an-environment-file",level:2},{value:"Behind a Reverse Proxy",id:"behind-a-reverse-proxy",level:2},{value:"Updating",id:"updating",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"View Logs",id:"view-logs",level:3},{value:"Access the Container Shell",id:"access-the-container-shell",level:3},{value:"Run Artisan Commands",id:"run-artisan-commands",level:3},{value:"Check Database Connection",id:"check-database-connection",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"docker",children:"Docker"})}),"\n",(0,s.jsx)(n.p,{children:"This guide will help you deploy Databasement using Docker. This is the simplest deployment method, using a single container that includes everything you need."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/engine/install/",children:"Docker"})," installed on your system"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-start-sqlite",children:"Quick Start (SQLite)"}),"\n",(0,s.jsx)(n.p,{children:"The simplest way to run Databasement with SQLite as the database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Generate an application key\nAPP_KEY=$(docker run --rm davidcrty/databasement:latest php artisan key:generate --show)\n\n# Run the container\ndocker run -d \\\n  --name databasement \\\n  -p 8000:8000 \\\n  -e APP_KEY=$APP_KEY \\\n  -e DB_CONNECTION=sqlite \\\n  -e DB_DATABASE=/app/database/database.sqlite \\\n  -v databasement-storage:/app/storage \\\n  -v databasement-database:/app/database \\\n  davidcrty/databasement:latest\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Access the application at ",(0,s.jsx)(n.a,{href:"http://localhost:8000",children:"http://localhost:8000"})]}),"\n",(0,s.jsx)(n.h2,{id:"production-setup-external-database",children:"Production Setup (External Database)"}),"\n",(0,s.jsx)(n.p,{children:"For production, we recommend using MySQL or PostgreSQL instead of SQLite."}),"\n",(0,s.jsx)(n.h3,{id:"1-generate-the-application-key",children:"1. Generate the Application Key"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run --rm davidcrty/databasement:latest php artisan key:generate --show\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Save this key - you'll need it for the ",(0,s.jsx)(n.code,{children:"APP_KEY"})," environment variable."]}),"\n",(0,s.jsx)(n.h3,{id:"2-prepare-your-database",children:"2. Prepare Your Database"}),"\n",(0,s.jsx)(n.p,{children:"Create a database and user for Databasement on your MySQL/PostgreSQL server:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"MySQL:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE databasement CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\nCREATE USER 'databasement'@'%' IDENTIFIED BY 'your-secure-password';\nGRANT ALL PRIVILEGES ON databasement.* TO 'databasement'@'%';\nFLUSH PRIVILEGES;\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"PostgreSQL:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE DATABASE databasement;\nCREATE USER databasement WITH ENCRYPTED PASSWORD 'your-secure-password';\nGRANT ALL PRIVILEGES ON DATABASE databasement TO databasement;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-run-the-container",children:"3. Run the Container"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name databasement \\\n  -p 8000:8000 \\\n  -e APP_NAME=Databasement \\\n  -e APP_ENV=production \\\n  -e APP_DEBUG=false \\\n  -e APP_URL=https://backup.yourdomain.com \\\n  -e APP_KEY=base64:your-generated-key \\\n  -e DB_CONNECTION=mysql \\\n  -e DB_HOST=your-mysql-host \\\n  -e DB_PORT=3306 \\\n  -e DB_DATABASE=databasement \\\n  -e DB_USERNAME=databasement \\\n  -e DB_PASSWORD=your-secure-password \\\n  -e LOG_CHANNEL=stderr \\\n  -v databasement-storage:/app/storage \\\n  davidcrty/databasement:latest\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-access-the-application",children:"4. Access the Application"}),"\n",(0,s.jsxs)(n.p,{children:["Open your browser and navigate to your configured URL (or ",(0,s.jsx)(n.a,{href:"http://localhost:8000",children:"http://localhost:8000"})," for local setups)."]}),"\n",(0,s.jsx)(n.h2,{id:"using-an-environment-file",children:"Using an Environment File"}),"\n",(0,s.jsxs)(n.p,{children:["For easier management, create an ",(0,s.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"APP_NAME=Databasement\nAPP_ENV=production\nAPP_DEBUG=false\nAPP_URL=https://backup.yourdomain.com\nAPP_KEY=base64:your-generated-key\n\nDB_CONNECTION=mysql\nDB_HOST=your-mysql-host\nDB_PORT=3306\nDB_DATABASE=databasement\nDB_USERNAME=databasement\nDB_PASSWORD=your-secure-password\n\nLOG_CHANNEL=stderr\nMYSQL_CLI_TYPE=mariadb\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then run with:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name databasement \\\n  -p 8000:8000 \\\n  --env-file .env \\\n  -v databasement-storage:/app/storage \\\n  davidcrty/databasement:latest\n"})}),"\n",(0,s.jsx)(n.h2,{id:"behind-a-reverse-proxy",children:"Behind a Reverse Proxy"}),"\n",(0,s.jsx)(n.p,{children:"When running behind a reverse proxy (nginx, Traefik, Caddy), make sure to:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Set ",(0,s.jsx)(n.code,{children:"APP_URL"})," to your public HTTPS URL"]}),"\n",(0,s.jsxs)(n.li,{children:["Configure your proxy to forward the ",(0,s.jsx)(n.code,{children:"X-Forwarded-*"})," headers"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example nginx configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 443 ssl http2;\n    server_name backup.yourdomain.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"updating",children:"Updating"}),"\n",(0,s.jsx)(n.p,{children:"To update to the latest version:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Pull the latest image\ndocker pull davidcrty/databasement:latest\n\n# Stop and remove the old container\ndocker stop databasement\ndocker rm databasement\n\n# Start a new container with the same configuration\ndocker run -d \\\n  --name databasement \\\n  -p 8000:8000 \\\n  --env-file .env \\\n  -v databasement-storage:/app/storage \\\n  davidcrty/databasement:latest\n"})}),"\n",(0,s.jsx)(n.p,{children:"The container automatically runs database migrations on startup, so your data will be migrated to the new schema."}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker logs databasement\ndocker logs -f databasement  # Follow logs\n"})}),"\n",(0,s.jsx)(n.h3,{id:"access-the-container-shell",children:"Access the Container Shell"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec -it databasement sh\n"})}),"\n",(0,s.jsx)(n.h3,{id:"run-artisan-commands",children:"Run Artisan Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec databasement php artisan migrate:status\ndocker exec databasement php artisan queue:work --once\n"})}),"\n",(0,s.jsx)(n.h3,{id:"check-database-connection",children:"Check Database Connection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec databasement php artisan db:show\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var t=a(6540);const s={},r=t.createContext(s);function i(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);