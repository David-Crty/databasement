"use strict";(globalThis.webpackChunkdatabasement_docs=globalThis.webpackChunkdatabasement_docs||[]).push([[170],{5667:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"user-guide/volumes","title":"Storage Volumes","description":"Storage volumes are the destinations where your backup files are stored. Databasement supports local filesystem storage and S3-compatible object storage.","source":"@site/docs/user-guide/volumes.md","sourceDirName":"user-guide","slug":"/user-guide/volumes","permalink":"/databasement/user-guide/volumes","draft":false,"unlisted":false,"editUrl":"https://github.com/David-Crty/databasement/tree/main/docs/docs/user-guide/volumes.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"userGuideSidebar","previous":{"title":"Snapshots","permalink":"/databasement/user-guide/snapshots"}}');var l=s(4848),t=s(8453);const r={sidebar_position:5},c="Storage Volumes",o={},d=[{value:"Volume Types",id:"volume-types",level:2},{value:"Local Storage",id:"local-storage",level:3},{value:"S3-Compatible Storage",id:"s3-compatible-storage",level:3},{value:"Creating a Volume",id:"creating-a-volume",level:2},{value:"Local Volume",id:"local-volume",level:3},{value:"S3 Volume",id:"s3-volume",level:3},{value:"S3 IAM Permissions",id:"s3-iam-permissions",level:2},{value:"Using Non-AWS S3 Services",id:"using-non-aws-s3-services",level:2},{value:"MinIO",id:"minio",level:3},{value:"DigitalOcean Spaces",id:"digitalocean-spaces",level:3},{value:"Backblaze B2",id:"backblaze-b2",level:3},{value:"Editing Volumes",id:"editing-volumes",level:2},{value:"Deleting Volumes",id:"deleting-volumes",level:2},{value:"Volume Management Tips",id:"volume-management-tips",level:2},{value:"Capacity Planning",id:"capacity-planning",level:3},{value:"Organization",id:"organization",level:3},{value:"Cost Optimization for S3",id:"cost-optimization-for-s3",level:3}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"storage-volumes",children:"Storage Volumes"})}),"\n",(0,l.jsx)(n.p,{children:"Storage volumes are the destinations where your backup files are stored. Databasement supports local filesystem storage and S3-compatible object storage."}),"\n",(0,l.jsx)(n.h2,{id:"volume-types",children:"Volume Types"}),"\n",(0,l.jsx)(n.h3,{id:"local-storage",children:"Local Storage"}),"\n",(0,l.jsx)(n.p,{children:"Store backups directly on the Databasement server's filesystem. This is the simplest option but requires adequate disk space."}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Small deployments"}),"\n",(0,l.jsx)(n.li,{children:"Testing and development"}),"\n",(0,l.jsx)(n.li,{children:"Fast local access to backups"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Considerations:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Backups are lost if the server fails"}),"\n",(0,l.jsx)(n.li,{children:"Limited by server disk capacity"}),"\n",(0,l.jsx)(n.li,{children:"Not suitable for distributed setups"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"s3-compatible-storage",children:"S3-Compatible Storage"}),"\n",(0,l.jsx)(n.p,{children:"Store backups in Amazon S3 or any S3-compatible service:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Amazon S3"}),"\n",(0,l.jsx)(n.li,{children:"MinIO"}),"\n",(0,l.jsx)(n.li,{children:"DigitalOcean Spaces"}),"\n",(0,l.jsx)(n.li,{children:"Backblaze B2"}),"\n",(0,l.jsx)(n.li,{children:"Wasabi"}),"\n",(0,l.jsx)(n.li,{children:"And many others"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Best for:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Production environments"}),"\n",(0,l.jsx)(n.li,{children:"Disaster recovery"}),"\n",(0,l.jsx)(n.li,{children:"Large-scale backups"}),"\n",(0,l.jsx)(n.li,{children:"Geographic redundancy"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"creating-a-volume",children:"Creating a Volume"}),"\n",(0,l.jsx)(n.h3,{id:"local-volume",children:"Local Volume"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Navigate to ",(0,l.jsx)(n.strong,{children:"Volumes"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Add Volume"})]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"Local"})," as the type"]}),"\n",(0,l.jsx)(n.li,{children:"Configure:"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Field"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Name"})}),(0,l.jsx)(n.td,{children:"Friendly name for this volume"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Path"})}),(0,l.jsxs)(n.td,{children:["Absolute path on the filesystem (e.g., ",(0,l.jsx)(n.code,{children:"/backups"}),")"]})]})]})]}),"\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Save"})]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsx)(n.p,{children:"Ensure the Databasement container has write access to the specified path. You may need to mount a volume when running Docker."})}),"\n",(0,l.jsx)(n.h3,{id:"s3-volume",children:"S3 Volume"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Navigate to ",(0,l.jsx)(n.strong,{children:"Volumes"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Add Volume"})]}),"\n",(0,l.jsxs)(n.li,{children:["Select ",(0,l.jsx)(n.strong,{children:"S3"})," as the type"]}),"\n",(0,l.jsx)(n.li,{children:"Configure:"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Field"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Name"})}),(0,l.jsx)(n.td,{children:"Friendly name for this volume"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Bucket"})}),(0,l.jsx)(n.td,{children:"S3 bucket name"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Region"})}),(0,l.jsxs)(n.td,{children:["AWS region (e.g., ",(0,l.jsx)(n.code,{children:"us-east-1"}),")"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Access Key"})}),(0,l.jsx)(n.td,{children:"AWS access key ID"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Secret Key"})}),(0,l.jsx)(n.td,{children:"AWS secret access key"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Endpoint"})}),(0,l.jsx)(n.td,{children:"Custom endpoint (for non-AWS S3 services)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Path Prefix"})}),(0,l.jsx)(n.td,{children:"Optional folder prefix within the bucket"})]})]})]}),"\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Test Connection"})," to verify access"]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Save"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"s3-iam-permissions",children:"S3 IAM Permissions"}),"\n",(0,l.jsx)(n.p,{children:"The AWS credentials need these permissions:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Action": [\n                "s3:PutObject",\n                "s3:GetObject",\n                "s3:DeleteObject",\n                "s3:ListBucket"\n            ],\n            "Resource": [\n                "arn:aws:s3:::your-bucket-name",\n                "arn:aws:s3:::your-bucket-name/*"\n            ]\n        }\n    ]\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"using-non-aws-s3-services",children:"Using Non-AWS S3 Services"}),"\n",(0,l.jsx)(n.h3,{id:"minio",children:"MinIO"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Endpoint: http://minio.yourdomain.com:9000\nRegion: us-east-1 (or any value)\nAccess Key: your-minio-access-key\nSecret Key: your-minio-secret-key\n"})}),"\n",(0,l.jsx)(n.h3,{id:"digitalocean-spaces",children:"DigitalOcean Spaces"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Endpoint: https://nyc3.digitaloceanspaces.com\nRegion: nyc3\nAccess Key: your-spaces-access-key\nSecret Key: your-spaces-secret-key\n"})}),"\n",(0,l.jsx)(n.h3,{id:"backblaze-b2",children:"Backblaze B2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Endpoint: https://s3.us-west-000.backblazeb2.com\nRegion: us-west-000\nAccess Key: your-b2-application-key-id\nSecret Key: your-b2-application-key\n"})}),"\n",(0,l.jsx)(n.h2,{id:"editing-volumes",children:"Editing Volumes"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to ",(0,l.jsx)(n.strong,{children:"Volumes"})]}),"\n",(0,l.jsx)(n.li,{children:"Find the volume to edit"}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Edit"})]}),"\n",(0,l.jsx)(n.li,{children:"Update settings"}),"\n",(0,l.jsx)(n.li,{children:"Test the connection"}),"\n",(0,l.jsx)(n.li,{children:"Save changes"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"deleting-volumes",children:"Deleting Volumes"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to ",(0,l.jsx)(n.strong,{children:"Volumes"})]}),"\n",(0,l.jsx)(n.li,{children:"Find the volume to delete"}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Delete"})]}),"\n",(0,l.jsx)(n.li,{children:"Confirm the deletion"}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsx)(n.p,{children:"Deleting a volume does not delete the backup files stored in it. Files remain in the storage location but become inaccessible through Databasement."})}),"\n",(0,l.jsx)(n.h2,{id:"volume-management-tips",children:"Volume Management Tips"}),"\n",(0,l.jsx)(n.h3,{id:"capacity-planning",children:"Capacity Planning"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Monitor free space on local volumes"}),"\n",(0,l.jsx)(n.li,{children:"Set up S3 lifecycle policies for automatic cleanup"}),"\n",(0,l.jsx)(n.li,{children:"Estimate storage needs based on database size and backup frequency"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"organization",children:"Organization"}),"\n",(0,l.jsx)(n.p,{children:"Use path prefixes to organize backups:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/production/mysql/"})," - Production MySQL backups"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/staging/postgres/"})," - Staging PostgreSQL backups"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/daily/"})," - Daily backup schedule"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"cost-optimization-for-s3",children:"Cost Optimization for S3"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use S3 Intelligent-Tiering for automatic cost optimization"}),"\n",(0,l.jsx)(n.li,{children:"Configure lifecycle policies to move old backups to cheaper storage classes"}),"\n",(0,l.jsx)(n.li,{children:"Consider S3 Glacier for long-term retention"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var i=s(6540);const l={},t=i.createContext(l);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);